{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, page){\nconst baseURL = 'https://pixabay.com';\nconst endPoint ='/api/';\nconst params = new URLSearchParams({\nkey:\"53366828-bd78e2a0684a00ed0fbe9f50e\",\nq: query,\nimage_type: 'photo',\norientation: 'horizontal',\nsafesearch: 'true',\nper_page: 15,\npage: page,\n});\n\nconst url = `${baseURL}${endPoint}?${params}`;\nconst res = await axios.get(url);\nreturn res.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt', \n  captionPosition: 'bottom', \n});\nexport function createGallery(images){\nconst gallery  = document.querySelector('.gallery');\nconst markup = images.map(image => {\n    return `\n      <li>\n        <a href=\"${image.largeImageURL}\" title=\"${image.tags}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n        <div class=\"info\">\n          <p>Likes: <span class=\"value\">${image.likes}</span></p>\n          <p>Views: <span class=\"value\">${image.views}</span></p>\n          <p>Comments: <span class=\"value\">${image.comments}</span></p>\n          <p>Downloads: <span class=\"value\">${image.downloads}</span></p>\n        </div>\n      </li>\n    `;\n  }).join('');\ngallery.insertAdjacentHTML('beforeend', markup);\nlightbox.refresh();\n\n}\n\nexport function clearGallery(){\n   const gallery = document.querySelector('.gallery');\ngallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\nconst btnLoad = document.querySelector('.js-btn-load');\n  btnLoad.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\nconst btnLoad = document.querySelector('.js-btn-load');\n  btnLoad.classList.add('is-hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport {getImagesByQuery} from './js/pixabay-api';\nimport {createGallery,\n        clearGallery,\n        showLoader,\n        hideLoader,\n        showLoadMoreButton,\n        hideLoadMoreButton,\n} from './js/render-functions';\n\nconst formPixabay = document.querySelector('.form');\nconst input = document.querySelector('input[name=\"search-text\"]');\nconst galleryList = document.querySelector('[data-js-gallery]');\nconst loadMoreButton = document.querySelector('.js-btn-load');\n\nlet query;\nlet currentPage = 1;\nlet totalPages = 0;\n\nformPixabay.addEventListener('submit', async e =>{\n        e.preventDefault();\n        const formData = new FormData(e.target);\n        query = formData.get('search-text').trim();\n        currentPage = 1;\n\nif (!query) {\n    iziToast.error({\n      message: \"Please enter text!\",\n      position: \"topCenter\",\n    });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n  input.value = \"\";\n\n  try {\n    const res = await getImagesByQuery(query, currentPage);\n\n    if (res.hits.length === 0) {\n      iziToast.error({\n        message:\n          \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"center\",\n        backgroundColor: \"red\",\n        timeout: 3000,\n        pauseOnHover: true,\n        messageColor: \"white\",\n      });\n      return;\n    }\n\n    createGallery(res.hits);\n\n    totalPages = Math.ceil(res.totalHits / 15);\n\n    if (currentPage < totalPages) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: \"Not connecting, Please try again!\",\n      position: \"center\",\n      backgroundColor: \"yellow\",\n    });\n  } finally {\n    hideLoader();\n  }\n});\nloadMoreButton.addEventListener(\"click\", async () => {\n  currentPage++;\n  showLoader();\n  try {\n    const res = await getImagesByQuery(query, currentPage);\n    createGallery(res.hits);\n    const firstCard = document.querySelector('.gallery li');\nif (firstCard) {\n  const cardHeight = firstCard.getBoundingClientRect().height;\n  window.scrollBy({ top: cardHeight * 2, behavior: \"smooth\" });\n}\n\n    if (currentPage >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"bottomCenter\",\n      });\n    }\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: \"Error loading more images.\",\n      position: \"center\",\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["getImagesByQuery","query","page","baseURL","endPoint","params","url","axios","lightbox","SimpleLightbox","createGallery","images","gallery","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formPixabay","input","loadMoreButton","currentPage","totalPages","iziToast","res","error","firstCard","cardHeight"],"mappings":"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"}